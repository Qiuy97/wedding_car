{"version":3,"file":"booking.js","sources":["pages/booking/booking.uvue","pages/booking/booking.uvue?type=page"],"sourcesContent":["<template>\n  <!-- 预订页面 - 完全匹配HTML设计 -->\n  <view class=\"bg-white min-h-screen relative overflow-hidden\">\n    <scroll-view class=\"pb-16\" scroll-y>\n      <!-- 车辆信息卡片 - 完全匹配HTML设计 -->\n      <view class=\"p-4 bg-white\">\n        <view class=\"flex items-center\">\n          <image :src=\"carInfo.image\" :alt=\"carInfo.alt\" class=\"w-16 h-16 rounded-lg object-cover\" mode=\"aspectFill\"></image>\n          <view class=\"ml-3 flex-1\">\n            <text class=\"font-semibold\">{{ carInfo.name }}</text>\n            <view class=\"flex items-center mt-1\">\n              <text class=\"fa fa-star text-secondary text-xs mr-1\"></text>\n              <text class=\"text-sm\">{{ carInfo.rating }}</text>\n              <text class=\"text-neutral-light text-sm ml-2\">¥{{ carInfo.price }}/天</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 预订信息表单 - 完全匹配HTML设计 -->\n      <view class=\"mt-3 bg-white p-4\">\n        <text class=\"font-semibold mb-4\">预订信息</text>\n        \n        <view class=\"space-y-4\">\n          <!-- 服务日期 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">服务日期</text>\n            <picker mode=\"date\" :value=\"formData.serviceDate\" @change=\"onDateChange\" :start=\"minDate\">\n              <view class=\"flex justify-between items-center p-3 border border-gray-200 rounded-lg\">\n                <text :class=\"formData.serviceDate ? 'text-neutral' : 'text-neutral-light'\">\n                  {{ formData.serviceDate || '选择日期' }}\n                </text>\n                <text class=\"fa fa-calendar text-neutral-light\"></text>\n              </view>\n            </picker>\n          </view>\n\n          <!-- 服务时间 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">服务时间</text>\n            <picker mode=\"time\" :value=\"formData.serviceTime\" @change=\"onTimeChange\">\n              <view class=\"flex justify-between items-center p-3 border border-gray-200 rounded-lg\">\n                <text :class=\"formData.serviceTime ? 'text-neutral' : 'text-neutral-light'\">\n                  {{ formData.serviceTime || '选择时间' }}\n                </text>\n                <text class=\"fa fa-clock-o text-neutral-light\"></text>\n              </view>\n            </picker>\n      </view>\n\n          <!-- 接车地址 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">接车地址</text>\n            <view class=\"flex justify-between items-center p-3 border border-gray-200 rounded-lg\" @click=\"selectLocation('pickup')\">\n              <text :class=\"formData.pickupAddress ? 'text-neutral' : 'text-neutral-light'\">\n                {{ formData.pickupAddress || '选择接车地址' }}\n              </text>\n              <text class=\"fa fa-map-marker text-neutral-light\"></text>\n            </view>\n          </view>\n\n          <!-- 目的地 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">目的地</text>\n            <view class=\"flex justify-between items-center p-3 border border-gray-200 rounded-lg\" @click=\"selectLocation('destination')\">\n              <text :class=\"formData.destination ? 'text-neutral' : 'text-neutral-light'\">\n                {{ formData.destination || '选择目的地' }}\n              </text>\n              <text class=\"fa fa-map-marker text-neutral-light\"></text>\n            </view>\n          </view>\n\n          <!-- 联系电话 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">联系电话</text>\n            <input \n              type=\"tel\" \n              v-model=\"formData.contactPhone\" \n              placeholder=\"请输入联系电话\" \n              class=\"w-full p-3 border border-gray-200 rounded-lg\"\n            >\n          </view>\n\n          <!-- 备注 -->\n          <view>\n            <text class=\"text-sm text-neutral mb-2\">备注</text>\n            <textarea \n              v-model=\"formData.remarks\" \n              placeholder=\"特殊需求或备注信息\" \n              class=\"w-full p-3 border border-gray-200 rounded-lg h-20 resize-none\"\n              maxlength=\"200\"\n            ></textarea>\n          </view>\n        </view>\n      </view>\n\n      <!-- 服务选项 - 完全匹配HTML设计 -->\n      <view class=\"mt-3 bg-white p-4\">\n        <text class=\"font-semibold mb-4\">服务选项</text>\n        \n        <view class=\"space-y-3\">\n          <view \n            v-for=\"service in serviceOptions\" \n                :key=\"service.id\"\n            class=\"flex justify-between items-center py-2\"\n            @click=\"toggleService(service)\"\n          >\n            <view class=\"flex-1\">\n              <text class=\"text-sm\">{{ service.name }}</text>\n              <text class=\"text-neutral-light text-xs block mt-1\">{{ service.description }}</text>\n            </view>\n            <view class=\"flex items-center\">\n              <text class=\"text-primary text-sm mr-3\">{{ service.price > 0 ? '+¥' + service.price : '免费' }}</text>\n              <view class=\"w-5 h-5 border border-primary rounded flex items-center justify-center\" :class=\"service.selected ? 'bg-primary' : ''\">\n                <text v-if=\"service.selected\" class=\"fa fa-check text-white text-xs\"></text>\n            </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 费用明细 - 完全匹配HTML设计 -->\n      <view class=\"mt-3 bg-white p-4\">\n        <text class=\"font-semibold mb-4\">费用明细</text>\n        \n        <view class=\"space-y-2\">\n          <view class=\"flex justify-between items-center\">\n            <text class=\"text-sm\">车辆租赁费</text>\n            <text class=\"text-sm\">¥{{ carInfo.price }}</text>\n          </view>\n          <view \n            v-for=\"service in selectedServices\" \n            :key=\"service.id\" \n            class=\"flex justify-between items-center\"\n          >\n            <text class=\"text-sm\">{{ service.name }}</text>\n            <text class=\"text-sm\">+¥{{ service.price }}</text>\n          </view>\n          <view class=\"border-t border-gray-200 pt-2 mt-2\">\n            <view class=\"flex justify-between items-center\">\n              <text class=\"font-semibold\">总计</text>\n              <text class=\"text-primary font-bold text-lg\">¥{{ totalAmount }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 底部操作栏 - 完全匹配HTML设计 -->\n    <view class=\"fixed bottom-16 left-0 right-0 bg-white border-t border-gray-100 p-4\">\n      <view class=\"flex justify-between items-center\">\n        <view>\n          <text class=\"text-neutral-light text-sm\">总计</text>\n          <text class=\"text-primary font-bold text-xl\">¥{{ totalAmount }}</text>\n      </view>\n        <button class=\"bg-primary text-white px-8 py-3 rounded-lg font-medium btn-hover\" @click=\"submitBooking\">\n          确认预订\n        </button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      carId: '',\n      // 车辆信息 - 完全匹配HTML设计\n      carInfo: {\n        _id: 'car001',\n        name: '奔驰S级',\n        image: 'https://picsum.photos/300/300?random=70',\n        alt: '奔驰S级婚车',\n        rating: 4.9,\n        price: 2800\n      },\n      // 预订表单数据 - 完全匹配HTML设计\n      formData: {\n        serviceDate: '',\n        serviceTime: '',\n        pickupAddress: '',\n        destination: '',\n        contactPhone: '',\n        remarks: ''\n      },\n      // 服务选项 - 完全匹配HTML设计\n      serviceOptions: [\n        {\n          id: 1,\n          name: '婚车装饰',\n          description: '包含鲜花装饰、拉花布置等',\n          price: 0,\n          selected: true\n        },\n        {\n          id: 2,\n          name: '专业司机',\n          description: '经验丰富的专业司机',\n          price: 0,\n          selected: true\n        },\n        {\n          id: 3,\n          name: '跟拍服务',\n          description: '专业摄影师全程跟拍',\n          price: 500,\n          selected: false\n        },\n        {\n          id: 4,\n          name: '迎宾服务',\n          description: '专业迎宾团队',\n          price: 300,\n          selected: false\n        }\n      ]\n    }\n  },\n  computed: {\n    // 计算最小日期（今天）\n    minDate() {\n      const today = new Date();\n      return today.toISOString().split('T')[0];\n    },\n    // 已选择的服务\n    selectedServices() {\n      return this.serviceOptions.filter(service => service.selected && service.price > 0);\n    },\n    // 计算总金额\n    totalAmount() {\n      const basePrice = this.carInfo.price;\n      const servicesPrice = this.selectedServices.reduce((total, service) => total + service.price, 0);\n      return basePrice + servicesPrice;\n    }\n  },\n  onLoad(options) {\n    this.carId = options.carId || 'car001';\n    // 可以从URL参数获取车辆信息\n    if (options.carName) {\n      this.carInfo.name = options.carName;\n    }\n    if (options.price) {\n      this.carInfo.price = parseInt(options.price);\n    }\n  },\n  methods: {\n    // 日期选择\n    onDateChange(e) {\n      this.formData.serviceDate = e.detail.value;\n    },\n    \n    // 时间选择\n    onTimeChange(e) {\n      this.formData.serviceTime = e.detail.value;\n    },\n    \n    // 地址选择\n    selectLocation(type) {\n      // 模拟地址选择，实际应用中会调用地图API\n      const addresses = [\n        '北京市朝阳区国贸大厦',\n        '北京市海淀区中关村',\n        '北京市西城区金融街',\n        '北京市东城区王府井'\n      ];\n      \n      uni.showActionSheet({\n        itemList: addresses,\n        success: (res) => {\n          const selectedAddress = addresses[res.tapIndex];\n          if (type === 'pickup') {\n            this.formData.pickupAddress = selectedAddress;\n          } else if (type === 'destination') {\n            this.formData.destination = selectedAddress;\n          }\n        }\n      });\n    },\n    \n    // 切换服务选项\n    toggleService(service) {\n      // 前两个服务是默认包含的，不能取消\n      if (service.id <= 2) {\n        return;\n      }\n      service.selected = !service.selected;\n    },\n    \n    // 表单验证\n    validateForm() {\n      if (!this.formData.serviceDate) {\n        uni.showToast({ title: '请选择服务日期', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.formData.serviceTime) {\n        uni.showToast({ title: '请选择服务时间', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.formData.pickupAddress) {\n        uni.showToast({ title: '请选择接车地址', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.formData.destination) {\n        uni.showToast({ title: '请选择目的地', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.formData.contactPhone) {\n        uni.showToast({ title: '请输入联系电话', icon: 'none' });\n        return false;\n      }\n      \n      // 验证手机号格式\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      if (!phoneRegex.test(this.formData.contactPhone)) {\n        uni.showToast({ title: '请输入正确的手机号', icon: 'none' });\n        return false;\n      }\n      \n      return true;\n    },\n    \n    // 提交预订\n    async submitBooking() {\n      if (!this.validateForm()) {\n        return;\n      }\n      \n      uni.showLoading({ title: '提交中...' });\n      \n      try {\n        // 构建订单数据\n        const orderData = {\n          carId: this.carId,\n          carName: this.carInfo.name,\n          serviceDate: this.formData.serviceDate,\n          serviceTime: this.formData.serviceTime,\n          pickupAddress: this.formData.pickupAddress,\n          destination: this.formData.destination,\n          contactPhone: this.formData.contactPhone,\n          remarks: this.formData.remarks,\n          selectedServices: this.selectedServices,\n          totalAmount: this.totalAmount\n        };\n        \n        // 模拟API调用延迟\n        await new Promise(resolve => setTimeout(resolve, 1500));\n        \n        uni.hideLoading();\n        \n        // 生成订单ID\n        const orderId = 'WC' + Date.now();\n        \n        // 跳转到支付页面\n        uni.redirectTo({\n          url: `/pages/payment/payment?orderId=${orderId}&amount=${this.totalAmount}&carName=${encodeURIComponent(this.carInfo.name)}`\n        });\n        \n      } catch (error) {\n        uni.hideLoading();\n        uni.__f__('error','at pages/booking/booking.uvue:365','提交预订失败:', error);\n        uni.showToast({\n          title: '提交失败，请重试',\n          icon: 'none'\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* 页面特定样式 - 使用全局Tailwind CSS类，只定义特殊需求 */\n\n/* 确保图标字体正确显示 */\n.fa {\n  font-family: 'FontAwesome' !important;\n}\n\n/* 触摸反馈效果 - 匹配HTML设计 */\n.btn-hover:active {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(183, 110, 121, 0.3);\n}\n\n/* 输入框和选择器样式 */\ninput, textarea {\n  font-family: inherit;\n  outline: none;\n}\n\ninput:focus, textarea:focus {\n  border-color: rgba(183, 110, 121, 0.3);\n  box-shadow: 0 0 0 2px rgba(183, 110, 121, 0.1);\n}\n\n/* 状态栏适配 */\npage {\n  background-color: #F9F9F9;\n}\n</style>\n","import MiniProgramPage from '/Users/admin/Documents/HBuilderProjects/wedding_car/pages/booking/booking.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}