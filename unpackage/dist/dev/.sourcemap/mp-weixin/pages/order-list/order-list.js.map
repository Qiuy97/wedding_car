{"version":3,"file":"order-list.js","sources":["pages/order-list/order-list.uvue","pages/order-list/order-list.uvue?type=page"],"sourcesContent":["<template>\n  <!-- 订单列表页 - 完全匹配HTML设计 -->\n  <view class=\"bg-white min-h-screen relative overflow-hidden\">\n    <!-- 状态标签栏 - 完全匹配HTML设计 -->\n    <view class=\"bg-white border-b border-gray-100 sticky top-0 z-10\">\n      <scroll-view class=\"flex overflow-x-auto scrollbar-hide\" scroll-x>\n        <view class=\"flex\">\n          <button \n            v-for=\"tab in tabs\" \n            :key=\"tab.key\" \n            class=\"whitespace-nowrap px-4 py-3 text-sm\"\n            :class=\"activeTab === tab.key ? 'text-primary border-b-2 border-primary font-medium' : 'text-neutral-light'\"\n            @click=\"switchTab(tab.key)\"\n          >\n            {{ tab.name }}\n          </button>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 订单列表 - 完全匹配HTML设计 -->\n    <scroll-view class=\"pb-16\" scroll-y @scrolltolower=\"loadMore\">\n      <view class=\"p-4 space-y-3\">\n        <!-- 订单项 -->\n        <view \n          v-for=\"order in filteredOrders\" \n          :key=\"order.id\" \n          class=\"bg-white rounded-lg shadow p-4\"\n          @click=\"goToOrderDetail(order)\"\n        >\n          <!-- 订单头部 -->\n          <view class=\"flex justify-between items-center mb-3\">\n            <text class=\"text-neutral-light text-sm\">订单号：{{ order.orderNo }}</text>\n            <view class=\"px-2 py-1 rounded-full text-xs\" :class=\"getStatusClass(order.status)\">\n              {{ getStatusText(order.status) }}\n            </view>\n          </view>\n\n          <!-- 订单内容 -->\n          <view class=\"flex items-center mb-3\">\n            <image :src=\"order.car.image\" :alt=\"order.car.name\" class=\"w-16 h-16 rounded-lg object-cover\" mode=\"aspectFill\"></image>\n            <view class=\"ml-3 flex-1\">\n              <text class=\"font-medium\">{{ order.car.name }}</text>\n              <view class=\"text-neutral-light text-sm mt-1\">\n                <text class=\"block\">{{ order.serviceDate }} {{ order.serviceTime }}</text>\n                <text class=\"block\">{{ order.pickupAddress }}</text>\n              </view>\n            </view>\n            <view class=\"text-right\">\n              <text class=\"text-primary font-bold text-lg\">¥{{ order.totalAmount }}</text>\n            </view>\n          </view>\n\n          <!-- 操作按钮 -->\n          <view class=\"flex justify-end space-x-2\" v-if=\"order.actions && order.actions.length\">\n            <button \n              v-for=\"action in order.actions\" \n              :key=\"action.type\"\n              class=\"px-3 py-1.5 rounded-lg text-sm\"\n              :class=\"action.type === 'primary' ? 'bg-primary text-white' : 'border border-primary text-primary'\"\n              @click.stop=\"handleAction(action, order)\"\n            >\n              {{ action.text }}\n            </button>\n          </view>\n        </view>\n\n        <!-- 空状态 -->\n        <view v-if=\"filteredOrders.length === 0 && !loading\" class=\"text-center py-20\">\n          <text class=\"fa fa-file-text-o text-4xl text-neutral-light block mb-4\"></text>\n          <text class=\"text-neutral-light\">暂无{{ activeTabName }}订单</text>\n        </view>\n\n        <!-- 加载更多 -->\n        <view v-if=\"hasMore && filteredOrders.length > 0\" class=\"text-center py-4\">\n          <button class=\"text-primary\" @click=\"loadMore\">\n            <text v-if=\"loading\">加载中...</text>\n            <text v-else>加载更多</text>\n          </button>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      activeTab: 'all',\n      loading: false,\n      hasMore: true,\n      page: 1,\n      // 标签配置 - 完全匹配HTML设计\n      tabs: [\n        { key: 'all', name: '全部' },\n        { key: 'pending', name: '待确认' },\n        { key: 'confirmed', name: '已确认' },\n        { key: 'ongoing', name: '进行中' },\n        { key: 'completed', name: '已完成' }\n      ],\n      // 订单数据 - 完全匹配HTML设计\n      orders: [\n        {\n          id: 'WC202501151030',\n          orderNo: 'WC202501151030',\n          status: 'confirmed',\n          serviceDate: '2025-02-14',\n          serviceTime: '09:00',\n          pickupAddress: '北京市朝阳区三里屯',\n          totalAmount: 3300,\n          car: {\n            name: '奔驰S级',\n            image: 'https://picsum.photos/300/300?random=100'\n          },\n          actions: [\n            { type: 'secondary', text: '联系车主', action: 'contact' },\n            { type: 'secondary', text: '取消订单', action: 'cancel' }\n          ]\n        },\n        {\n          id: 'WC202501101420',\n          orderNo: 'WC202501101420',\n          status: 'completed',\n          serviceDate: '2025-01-20',\n          serviceTime: '14:00',\n          pickupAddress: '北京市海淀区中关村',\n          totalAmount: 2800,\n          car: {\n            name: '宝马7系',\n            image: 'https://picsum.photos/300/300?random=101'\n          },\n          actions: [\n            { type: 'primary', text: '评价订单', action: 'rate' }\n          ]\n        },\n        {\n          id: 'WC202501051000',\n          orderNo: 'WC202501051000',\n          status: 'pending',\n          serviceDate: '2025-02-01',\n          serviceTime: '10:00',\n          pickupAddress: '北京市西城区金融街',\n          totalAmount: 4200,\n          car: {\n            name: '劳斯莱斯幻影',\n            image: 'https://picsum.photos/300/300?random=102'\n          },\n          actions: [\n            { type: 'secondary', text: '联系车主', action: 'contact' },\n            { type: 'secondary', text: '取消订单', action: 'cancel' }\n          ]\n        },\n        {\n          id: 'WC202412281600',\n          orderNo: 'WC202412281600',\n          status: 'ongoing',\n          serviceDate: '2024-12-28',\n          serviceTime: '16:00',\n          pickupAddress: '北京市东城区王府井',\n          totalAmount: 3500,\n          car: {\n            name: '奥迪A8',\n            image: 'https://picsum.photos/300/300?random=103'\n          },\n          actions: [\n            { type: 'secondary', text: '联系车主', action: 'contact' }\n          ]\n        }\n      ]\n    }\n  },\n  computed: {\n    // 当前选中标签名称\n    activeTabName() {\n      const tab = this.tabs.find(t => t.key === this.activeTab);\n      return tab ? tab.name : '';\n    },\n    \n    // 过滤后的订单列表\n    filteredOrders() {\n      if (this.activeTab === 'all') {\n        return this.orders;\n      }\n      return this.orders.filter(order => order.status === this.activeTab);\n    }\n  },\n  onLoad() {\n    this.loadOrderList();\n  },\n  onShow() {\n    // 页面显示时刷新数据\n    this.refreshOrderList();\n  },\n  methods: {\n    // 切换标签\n    switchTab(tab) {\n      this.activeTab = tab;\n    },\n    \n    // 加载订单列表\n    async loadOrderList(refresh = false) {\n      if (this.loading) return;\n      \n      this.loading = true;\n      \n      try {\n        // 模拟API调用延迟\n        await new Promise(resolve => setTimeout(resolve, 800));\n        \n        // 在实际应用中，这里会调用API获取订单列表\n        uni.__f__('log','at pages/order-list/order-list.uvue:212','加载订单列表，标签:', this.activeTab, '页码:', this.page);\n        \n        this.hasMore = false; // 模拟数据已全部加载\n        \n      } catch (error) {\n        uni.__f__('error','at pages/order-list/order-list.uvue:217','加载订单列表失败:', error);\n        uni.showToast({\n          title: '加载失败',\n          icon: 'none'\n        });\n      }\n      \n      this.loading = false;\n    },\n    \n    // 刷新订单列表\n    refreshOrderList() {\n      this.page = 1;\n      this.loadOrderList(true);\n    },\n    \n    // 加载更多\n    loadMore() {\n      if (this.hasMore && !this.loading) {\n        this.page++;\n        this.loadOrderList();\n      }\n    },\n    \n    // 获取状态样式类\n    getStatusClass(status) {\n      const classMap = {\n        'pending': 'bg-secondary-10 text-secondary',     // 待确认 - 金色\n        'confirmed': 'bg-primary-10 text-primary',       // 已确认 - 主色\n        'ongoing': 'bg-blue-100 text-blue-600',          // 进行中 - 蓝色\n        'completed': 'bg-green-100 text-green-600',      // 已完成 - 绿色\n        'cancelled': 'bg-red-100 text-red-600'           // 已取消 - 红色\n      };\n      return classMap[status] || 'bg-gray-100 text-gray-600';\n    },\n    \n    // 获取状态文本\n    getStatusText(status) {\n      const statusMap = {\n        'pending': '待确认',\n        'confirmed': '已确认',\n        'ongoing': '进行中',\n        'completed': '已完成',\n        'cancelled': '已取消'\n      };\n      return statusMap[status] || '未知状态';\n    },\n    \n    // 跳转到订单详情\n    goToOrderDetail(order) {\n      uni.navigateTo({\n        url: `/pages/order-detail/order-detail?id=${order.id}`\n      });\n    },\n    \n    // 处理操作按钮点击\n    handleAction(action, order) {\n      switch (action.action) {\n        case 'contact':\n          this.contactOwner(order);\n          break;\n        case 'cancel':\n          this.cancelOrder(order);\n          break;\n        case 'rate':\n          this.rateOrder(order);\n          break;\n        default:\n          uni.__f__('log','at pages/order-list/order-list.uvue:285','未知操作:', action.action);\n      }\n    },\n    \n    // 联系车主\n    contactOwner(order) {\n      uni.showModal({\n        title: '联系车主',\n        content: '是否拨打车主电话？',\n        success: (res) => {\n          if (res.confirm) {\n            uni.makePhoneCall({\n              phoneNumber: '13800138000'\n            });\n          }\n        }\n      });\n    },\n    \n    // 取消订单\n    cancelOrder(order) {\n      uni.showModal({\n        title: '确认取消',\n        content: '确定要取消这个订单吗？取消后费用将原路退回。',\n        success: (res) => {\n          if (res.confirm) {\n            uni.showLoading({ title: '取消中...' });\n            \n            // 模拟API调用\n            setTimeout(() => {\n              uni.hideLoading();\n              \n              // 更新订单状态\n              const orderIndex = this.orders.findIndex(o => o.id === order.id);\n              if (orderIndex !== -1) {\n                this.orders[orderIndex].status = 'cancelled';\n                this.orders[orderIndex].actions = [];\n              }\n              \n              uni.showToast({\n                title: '订单已取消',\n                icon: 'success'\n              });\n            }, 1500);\n          }\n        }\n      });\n    },\n    \n    // 评价订单\n    rateOrder(order) {\n      uni.showToast({\n        title: '评价功能开发中',\n        icon: 'none'\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* 页面特定样式 - 使用全局Tailwind CSS类，只定义特殊需求 */\n\n/* 确保图标字体正确显示 */\n.fa {\n  font-family: 'FontAwesome' !important;\n}\n\n/* 透明度背景颜色 */\n.bg-secondary-10 {\n  background-color: rgba(212, 175, 55, 0.1);\n}\n\n.bg-primary-10 {\n  background-color: rgba(183, 110, 121, 0.1);\n}\n\n.text-secondary {\n  color: #D4AF37;\n}\n\n/* 标签栏底部边框 */\n.border-b-2 {\n  border-bottom-width: 2px;\n}\n\n.border-primary {\n  border-color: #B76E79;\n}\n\n/* 状态栏适配 */\npage {\n  background-color: #F9F9F9;\n}\n</style>\n","import MiniProgramPage from '/Users/admin/Documents/HBuilderProjects/wedding_car/pages/order-list/order-list.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}