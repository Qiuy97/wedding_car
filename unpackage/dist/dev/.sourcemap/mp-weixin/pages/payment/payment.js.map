{"version":3,"file":"payment.js","sources":["pages/payment/payment.uvue","pages/payment/payment.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"payment-page\">\n    <!-- 支付金额 -->\n    <view class=\"amount-section\">\n      <text class=\"amount-label\">支付金额</text>\n      <text class=\"amount-text\">¥{{ paymentAmount }}</text>\n      <view class=\"countdown\">\n        <text class=\"fa fa-clock-o countdown-icon\"></text>\n        <text class=\"countdown-text\">{{ countdownText }}</text>\n      </view>\n    </view>\n\n    <!-- 订单信息 -->\n    <view class=\"order-section\">\n      <view class=\"section-title\">\n        <text class=\"title-text\">订单信息</text>\n      </view>\n      <view class=\"order-info\">\n        <view class=\"info-item\">\n          <text class=\"info-label\">车辆</text>\n          <text class=\"info-value\">劳斯莱斯 幻影</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"info-label\">服务时间</text>\n          <text class=\"info-value\">2025-02-14 09:00</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"info-label\">服务地点</text>\n          <text class=\"info-value\">北京市朝阳区三里屯</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 支付方式 -->\n    <view class=\"payment-methods\">\n      <view class=\"section-title\">\n        <text class=\"title-text\">支付方式</text>\n      </view>\n      <view class=\"method-list\">\n        <view class=\"method-item\" \n              :class=\"{ active: selectedMethod === 'wechat' }\"\n              @click=\"selectMethod('wechat')\">\n          <view class=\"method-icon wechat\">\n            <text class=\"fa fa-wechat\"></text>\n          </view>\n          <text class=\"method-name\">微信支付</text>\n          <text class=\"fa method-check\" :class=\"selectedMethod === 'wechat' ? 'fa-check-circle' : 'fa-circle-o'\"></text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 优惠券 -->\n    <view class=\"coupon-section\">\n      <view class=\"coupon-item\">\n        <text class=\"coupon-label\">优惠券</text>\n        <text class=\"coupon-status\">无可用优惠券</text>\n        <text class=\"fa fa-chevron-right\"></text>\n      </view>\n    </view>\n\n    <!-- 底部支付按钮 -->\n    <view class=\"bottom-actions\">\n      <view class=\"pay-btn\" @click=\"handlePayment\">\n        <text class=\"btn-text\">立即支付 ¥{{ paymentAmount }}</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      orderId: '',\n      paymentAmount: 0,\n      selectedMethod: 'wechat',\n      countdown: 900, // 15分钟倒计时\n      countdownTimer: null\n    }\n  },\n  computed: {\n    countdownText() {\n      const minutes = Math.floor(this.countdown / 60);\n      const seconds = this.countdown % 60;\n      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n  },\n  onLoad(options) {\n    this.orderId = options.orderId;\n    this.paymentAmount = parseFloat(options.amount);\n    this.startCountdown();\n  },\n  onUnload() {\n    if (this.countdownTimer) {\n      clearInterval(this.countdownTimer);\n    }\n  },\n  methods: {\n    startCountdown() {\n      this.countdownTimer = setInterval(() => {\n        this.countdown--;\n        if (this.countdown <= 0) {\n          clearInterval(this.countdownTimer);\n          uni.showModal({\n            title: '支付超时',\n            content: '订单已超时，请重新下单',\n            showCancel: false,\n            success: () => {\n              uni.navigateBack();\n            }\n          });\n        }\n      }, 1000);\n    },\n    selectMethod(method) {\n      this.selectedMethod = method;\n    },\n    async handlePayment() {\n      if (this.selectedMethod === 'wechat') {\n        this.wechatPay();\n      }\n    },\n    wechatPay() {\n      uni.showLoading({\n        title: '发起支付...'\n      });\n      \n      // 模拟支付流程\n      setTimeout(() => {\n        uni.hideLoading();\n        \n        // 模拟支付成功\n        uni.redirectTo({\n          url: `/pages/order-success/order-success?orderId=${this.orderId}`\n        });\n      }, 2000);\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.payment-page {\n  background-color: $uni-bg-color-grey;\n  min-height: 100vh;\n  padding-bottom: 80px;\n}\n\n.amount-section {\n  background: white;\n  padding: 40px 20px;\n  text-align: center;\n  margin-bottom: 12px;\n  \n  .amount-label {\n    font-size: 14px;\n    color: $uni-text-color-grey;\n    display: block;\n    margin-bottom: 8px;\n  }\n  \n  .amount-text {\n    font-size: 36px;\n    font-weight: bold;\n    color: $uni-color-primary;\n    display: block;\n    margin-bottom: 12px;\n  }\n  \n  .countdown {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    .countdown-icon {\n      color: $uni-text-color-grey;\n      font-size: 12px;\n      margin-right: 4px;\n    }\n    \n    .countdown-text {\n      font-size: 12px;\n      color: $uni-text-color-grey;\n    }\n  }\n}\n\n.order-section, .payment-methods, .coupon-section {\n  background: white;\n  margin-bottom: 12px;\n  padding: 20px;\n  \n  .section-title {\n    margin-bottom: 16px;\n    \n    .title-text {\n      font-size: 16px;\n      font-weight: bold;\n      color: $uni-text-color;\n    }\n  }\n}\n\n.order-info {\n  .info-item {\n    display: flex;\n    justify-content: space-between;\n    padding: 8px 0;\n    \n    .info-label {\n      font-size: 14px;\n      color: $uni-text-color-grey;\n    }\n    \n    .info-value {\n      font-size: 14px;\n      color: $uni-text-color;\n    }\n  }\n}\n\n.method-list {\n  .method-item {\n    display: flex;\n    align-items: center;\n    padding: 16px 0;\n    border: 2px solid transparent;\n    border-radius: 8px;\n    padding: 12px;\n    \n    &.active {\n      border-color: $uni-color-primary;\n    }\n    \n    .method-icon {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-right: 12px;\n      \n      &.wechat {\n        background: rgba(9, 187, 7, 0.1);\n        color: #09BB07;\n      }\n    }\n    \n    .method-name {\n      flex: 1;\n      font-size: 14px;\n      color: $uni-text-color;\n    }\n    \n    .method-check {\n      font-size: 20px;\n      \n      &.fa-check-circle {\n        color: $uni-color-primary;\n      }\n      \n      &.fa-circle-o {\n        color: $uni-text-color-grey;\n      }\n    }\n  }\n}\n\n.coupon-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  \n  .coupon-label {\n    font-size: 14px;\n    color: $uni-text-color;\n  }\n  \n  .coupon-status {\n    flex: 1;\n    text-align: right;\n    margin-right: 8px;\n    font-size: 14px;\n    color: $uni-color-primary;\n  }\n  \n  .fa-chevron-right {\n    color: $uni-text-color-grey;\n    font-size: 14px;\n  }\n}\n\n.bottom-actions {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  padding: 16px;\n  border-top: 1px solid $uni-border-color-light;\n  \n  .pay-btn {\n    width: 100%;\n    height: 48px;\n    background: $uni-color-primary;\n    color: white;\n    border-radius: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    .btn-text {\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/admin/Documents/HBuilderProjects/wedding_car/pages/payment/payment.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAsEA,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,SAAS;AAAA,MACT,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,gBAAgB;AAAA;EAEnB;AAAA,EACD,UAAU;AAAA,IACR,gBAAa;AACX,YAAM,UAAU,KAAK,MAAM,KAAK,YAAY,EAAE;AAC9C,YAAM,UAAU,KAAK,YAAY;AACjC,aAAO,GAAG,QAAQ,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,IACtF;AAAA,EACD;AAAA,EACD,OAAO,SAAO;AACZ,SAAK,UAAU,QAAQ;AACvB,SAAK,gBAAgB,WAAW,QAAQ,MAAM;AAC9C,SAAK,eAAc;AAAA,EACpB;AAAA,EACD,WAAQ;AACN,QAAI,KAAK,gBAAgB;AACvB,oBAAc,KAAK,cAAc;AAAA,IACnC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,iBAAc;AACZ,WAAK,iBAAiB,YAAY,MAAA;AAChC,aAAK;AACL,YAAI,KAAK,aAAa,GAAG;AACvB,wBAAc,KAAK,cAAc;AACjCC,8BAAI,UAAU,IAAA,cAAA;AAAA,YACZ,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,SAAS,MAAA;AACPA,4BAAG,MAAC,aAAY;AAAA,YAClB;AAAA,UACD,CAAA,CAAA;AAAA,QACH;AAAA,MACD,GAAE,GAAI;AAAA,IACR;AAAA,IACD,aAAa,SAAM,MAAA;AACjB,WAAK,iBAAiB;AAAA,IACvB;AAAA,IACK,gBAAa;;AACjB,YAAI,KAAK,mBAAmB,UAAU;AACpC,eAAK,UAAS;AAAA,QAChB;AAAA,OACD;AAAA,IAAA;AAAA,IACD,YAAS;AACPA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACR,CAAA;AAGD,iBAAW,MAAA;AACTA,sBAAG,MAAC,YAAW;AAGfA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,8CAA8C,KAAK,OAAO;AAAA,QAChE,CAAA;AAAA,MACF,GAAE,GAAI;AAAA,IACT;AAAA,EACF;CACF;;;;;;;;;;;;;;ACzIA,GAAG,WAAW,eAAe;"}