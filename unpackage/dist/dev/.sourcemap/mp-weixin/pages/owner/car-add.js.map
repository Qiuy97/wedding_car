{"version":3,"file":"car-add.js","sources":["pages/owner/car-add.uvue","pages/owner/car-add.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"car-add-page\">\n    <scroll-view class=\"content-scroll\" scroll-y>\n      <!-- 车辆图片 -->\n      <view class=\"image-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">车辆图片</text>\n          <text class=\"title-desc\">最多上传6张图片</text>\n        </view>\n        <view class=\"image-upload\">\n          <view class=\"image-item\" v-for=\"(image, index) in carImages\" :key=\"index\">\n            <image class=\"car-image\" :src=\"image\" mode=\"aspectFill\"></image>\n            <view class=\"image-delete\" @click=\"removeImage(index)\">\n              <text class=\"fa fa-times\"></text>\n            </view>\n          </view>\n          <view class=\"image-add\" v-if=\"carImages.length < 6\" @click=\"addImage\">\n            <text class=\"fa fa-plus add-icon\"></text>\n            <text class=\"add-text\">添加图片</text>\n          </view>\n        </view>\n      </view>\n\n      <!-- 基本信息 -->\n      <view class=\"basic-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">基本信息</text>\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">车辆品牌</text>\n          <picker :value=\"brandIndex\" :range=\"brands\" @change=\"onBrandChange\">\n            <view class=\"form-input\">\n              <text class=\"input-text\" :class=\"{ placeholder: brandIndex === -1 }\">\n                {{ brandIndex !== -1 ? brands[brandIndex] : '请选择品牌' }}\n              </text>\n              <text class=\"fa fa-chevron-down input-arrow\"></text>\n            </view>\n          </picker>\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">车辆型号</text>\n          <input class=\"form-input\" placeholder=\"请输入车辆型号\" v-model=\"formData.model\" />\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">车辆颜色</text>\n          <input class=\"form-input\" placeholder=\"请输入车辆颜色\" v-model=\"formData.color\" />\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">生产年份</text>\n          <picker mode=\"date\" fields=\"year\" :value=\"formData.year\" @change=\"onYearChange\">\n            <view class=\"form-input\">\n              <text class=\"input-text\" :class=\"{ placeholder: !formData.year }\">\n                {{ formData.year || '请选择年份' }}\n              </text>\n              <text class=\"fa fa-calendar input-arrow\"></text>\n            </view>\n          </picker>\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">座位数</text>\n          <picker :value=\"seatIndex\" :range=\"seatOptions\" @change=\"onSeatChange\">\n            <view class=\"form-input\">\n              <text class=\"input-text\" :class=\"{ placeholder: seatIndex === -1 }\">\n                {{ seatIndex !== -1 ? seatOptions[seatIndex] : '请选择座位数' }}\n              </text>\n              <text class=\"fa fa-chevron-down input-arrow\"></text>\n            </view>\n          </picker>\n        </view>\n      </view>\n\n      <!-- 价格设置 -->\n      <view class=\"price-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">价格设置</text>\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">每小时价格 (元)</text>\n          <input class=\"form-input\" type=\"number\" placeholder=\"请输入每小时价格\" v-model=\"formData.price_per_hour\" />\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">最低服务时长</text>\n          <picker :value=\"minHourIndex\" :range=\"minHourOptions\" @change=\"onMinHourChange\">\n            <view class=\"form-input\">\n              <text class=\"input-text\" :class=\"{ placeholder: minHourIndex === -1 }\">\n                {{ minHourIndex !== -1 ? minHourOptions[minHourIndex] : '请选择最低时长' }}\n              </text>\n              <text class=\"fa fa-chevron-down input-arrow\"></text>\n            </view>\n          </picker>\n        </view>\n      </view>\n\n      <!-- 服务区域 -->\n      <view class=\"area-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">服务区域</text>\n        </view>\n        <view class=\"form-group\">\n          <text class=\"form-label\">服务区域</text>\n          <input class=\"form-input\" placeholder=\"请输入服务区域\" v-model=\"formData.service_area\" />\n        </view>\n      </view>\n\n      <!-- 车辆特色 -->\n      <view class=\"features-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">车辆特色</text>\n        </view>\n        <view class=\"features-grid\">\n          <view class=\"feature-item\" \n                v-for=\"feature in availableFeatures\" \n                :key=\"feature\"\n                :class=\"{ selected: selectedFeatures.includes(feature) }\"\n                @click=\"toggleFeature(feature)\">\n            <text class=\"feature-text\">{{ feature }}</text>\n            <text class=\"fa\" :class=\"selectedFeatures.includes(feature) ? 'fa-check-circle' : 'fa-circle-o'\"></text>\n          </view>\n        </view>\n      </view>\n\n      <!-- 车辆描述 -->\n      <view class=\"desc-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">车辆描述</text>\n        </view>\n        <textarea class=\"desc-input\" \n                  placeholder=\"请描述您的车辆特色、服务优势等\"\n                  v-model=\"formData.description\"\n                  maxlength=\"200\"></textarea>\n      </view>\n    </scroll-view>\n\n    <!-- 底部操作栏 -->\n    <view class=\"bottom-actions\">\n      <view class=\"submit-btn\" @click=\"submitCar\">\n        <text class=\"btn-text\">提交审核</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      carImages: [],\n      brandIndex: -1,\n      brands: ['劳斯莱斯', '奔驰', '宝马', '奥迪', '林肯', '凯迪拉克', '雷克萨斯'],\n      seatIndex: -1,\n      seatOptions: ['2座', '4座', '5座', '6座', '7座', '8座'],\n      minHourIndex: -1,\n      minHourOptions: ['2小时', '3小时', '4小时', '6小时', '8小时'],\n      formData: {\n        brand: '',\n        model: '',\n        color: '',\n        year: '',\n        seats: '',\n        price_per_hour: '',\n        service_area: '',\n        description: ''\n      },\n      availableFeatures: [\n        'GPS导航', '车载WiFi', '真皮座椅', '天窗', '豪华内饰', \n        '专业司机', '婚车装饰', '保险齐全', '24小时服务', '免费接送'\n      ],\n      selectedFeatures: []\n    }\n  },\n  methods: {\n    addImage() {\n      uni.chooseImage({\n        count: 6 - this.carImages.length,\n        success: (res) => {\n          this.carImages = [...this.carImages, ...res.tempFilePaths];\n        }\n      });\n    },\n    removeImage(index) {\n      this.carImages.splice(index, 1);\n    },\n    onBrandChange(e) {\n      this.brandIndex = e.detail.value;\n      this.formData.brand = this.brands[this.brandIndex];\n    },\n    onYearChange(e) {\n      this.formData.year = e.detail.value;\n    },\n    onSeatChange(e) {\n      this.seatIndex = e.detail.value;\n      this.formData.seats = parseInt(this.seatOptions[this.seatIndex]);\n    },\n    onMinHourChange(e) {\n      this.minHourIndex = e.detail.value;\n    },\n    toggleFeature(feature) {\n      const index = this.selectedFeatures.indexOf(feature);\n      if (index > -1) {\n        this.selectedFeatures.splice(index, 1);\n      } else {\n        this.selectedFeatures.push(feature);\n      }\n    },\n    validateForm() {\n      if (this.carImages.length === 0) {\n        uni.showToast({\n          title: '请至少上传一张车辆图片',\n          icon: 'none'\n        });\n        return false;\n      }\n      \n      if (!this.formData.brand) {\n        uni.showToast({\n          title: '请选择车辆品牌',\n          icon: 'none'\n        });\n        return false;\n      }\n      \n      if (!this.formData.model) {\n        uni.showToast({\n          title: '请输入车辆型号',\n          icon: 'none'\n        });\n        return false;\n      }\n      \n      if (!this.formData.price_per_hour) {\n        uni.showToast({\n          title: '请输入每小时价格',\n          icon: 'none'\n        });\n        return false;\n      }\n      \n      return true;\n    },\n    async submitCar() {\n      if (!this.validateForm()) {\n        return;\n      }\n      \n      uni.showLoading({\n        title: '提交中...'\n      });\n      \n      try {\n        // 这里应该调用云函数提交车辆信息\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        \n        uni.hideLoading();\n        uni.showToast({\n          title: '提交成功，等待审核',\n          icon: 'success'\n        });\n        \n        setTimeout(() => {\n          uni.navigateBack();\n        }, 1500);\n        \n      } catch (error) {\n        uni.hideLoading();\n        uni.showToast({\n          title: '提交失败，请重试',\n          icon: 'none'\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.car-add-page {\n  background-color: $uni-bg-color-grey;\n  min-height: 100vh;\n  padding-bottom: 80px;\n}\n\n.content-scroll {\n  padding: 16px;\n}\n\n.image-section, .basic-section, .price-section, .area-section, .features-section, .desc-section {\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 12px;\n  \n  .section-title {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n    \n    .title-text {\n      font-size: 16px;\n      font-weight: bold;\n      color: $uni-text-color;\n    }\n    \n    .title-desc {\n      font-size: 12px;\n      color: $uni-text-color-grey;\n    }\n  }\n}\n\n.image-upload {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 8px;\n  \n  .image-item {\n    position: relative;\n    aspect-ratio: 1;\n    \n    .car-image {\n      width: 100%;\n      height: 100%;\n      border-radius: 8px;\n    }\n    \n    .image-delete {\n      position: absolute;\n      top: 4px;\n      right: 4px;\n      width: 20px;\n      height: 20px;\n      background: rgba(0, 0, 0, 0.6);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-size: 12px;\n    }\n  }\n  \n  .image-add {\n    aspect-ratio: 1;\n    border: 2px dashed $uni-border-color;\n    border-radius: 8px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    \n    .add-icon {\n      font-size: 24px;\n      color: $uni-text-color-grey;\n      margin-bottom: 4px;\n    }\n    \n    .add-text {\n      font-size: 12px;\n      color: $uni-text-color-grey;\n    }\n  }\n}\n\n.form-group {\n  margin-bottom: 16px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  .form-label {\n    font-size: 14px;\n    color: $uni-text-color;\n    margin-bottom: 8px;\n    display: block;\n  }\n  \n  .form-input {\n    border: 1px solid $uni-border-color;\n    border-radius: 8px;\n    padding: 12px 16px;\n    font-size: 14px;\n    background: white;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    \n    .input-text {\n      flex: 1;\n      color: $uni-text-color;\n      \n      &.placeholder {\n        color: $uni-text-color-grey;\n      }\n    }\n    \n    .input-arrow {\n      color: $uni-text-color-grey;\n      font-size: 12px;\n    }\n  }\n}\n\n.features-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  \n  .feature-item {\n    border: 1px solid $uni-border-color;\n    border-radius: 8px;\n    padding: 12px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    \n    &.selected {\n      border-color: $uni-color-primary;\n      background: rgba($uni-color-primary, 0.05);\n    }\n    \n    .feature-text {\n      font-size: 14px;\n      color: $uni-text-color;\n    }\n    \n    .fa-check-circle {\n      color: $uni-color-primary;\n    }\n    \n    .fa-circle-o {\n      color: $uni-text-color-grey;\n    }\n  }\n}\n\n.desc-input {\n  width: 100%;\n  min-height: 100px;\n  border: 1px solid $uni-border-color;\n  border-radius: 8px;\n  padding: 12px;\n  font-size: 14px;\n  color: $uni-text-color;\n  line-height: 1.5;\n  resize: none;\n}\n\n.bottom-actions {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  padding: 16px;\n  border-top: 1px solid $uni-border-color-light;\n  \n  .submit-btn {\n    width: 100%;\n    height: 48px;\n    background: $uni-color-primary;\n    color: white;\n    border-radius: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    .btn-text {\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/admin/Documents/HBuilderProjects/wedding_car/pages/owner/car-add.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}