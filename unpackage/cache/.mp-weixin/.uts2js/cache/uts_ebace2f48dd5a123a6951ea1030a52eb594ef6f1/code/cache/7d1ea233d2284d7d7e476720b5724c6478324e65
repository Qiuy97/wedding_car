{"code":"import { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            statusBarHeight: 0,\n            chartPeriod: 0,\n            pendingOrders: 3,\n            ownerInfo: new UTSJSONObject({\n                nickname: '王师傅',\n                avatar: 'https://picsum.photos/100/100?random=90',\n                level: '资深车主',\n                ownerId: '776543210'\n            }),\n            ownerStats: new UTSJSONObject({\n                todayIncome: 1200,\n                monthIncome: 15600,\n                totalOrders: 156\n            }),\n            recentOrders: []\n        };\n    },\n    onLoad() {\n        this.getStatusBarHeight();\n        this.loadRecentOrders();\n    },\n    methods: {\n        getStatusBarHeight() {\n            const systemInfo = uni.getSystemInfoSync();\n            this.statusBarHeight = systemInfo.statusBarHeight || 0;\n        },\n        onAvatarError() {\n            uni.__f__('log', 'at pages/owner/dashboard.uvue:165', '头像加载失败');\n            // 使用默认头像\n            this.ownerInfo.avatar = 'https://via.placeholder.com/100x100/cccccc/ffffff?text=头像';\n        },\n        loadRecentOrders() {\n            // 模拟最近订单数据\n            this.recentOrders = [\n                {\n                    _id: 'order001',\n                    order_no: 'WC202501150001',\n                    car: { brand: '劳斯莱斯', model: '幻影' },\n                    customer_name: '张先生',\n                    service_date: '2025-02-14',\n                    service_time: '09:00',\n                    pickup_location: '朝阳区三里屯',\n                    total_amount: 4000,\n                    owner_amount: 3800,\n                    status: 1 // 待确认\n                },\n                {\n                    _id: 'order002',\n                    order_no: 'WC202501140002',\n                    car: { brand: '奔驰', model: 'S级' },\n                    customer_name: '李先生',\n                    service_date: '2025-01-20',\n                    service_time: '14:00',\n                    pickup_location: '海淀区中关村',\n                    total_amount: 2400,\n                    owner_amount: 2280,\n                    status: 2 // 已确认\n                },\n                {\n                    _id: 'order003',\n                    order_no: 'WC202501130003',\n                    car: { brand: '宝马', model: '7系' },\n                    customer_name: '王女士',\n                    service_date: '2025-01-18',\n                    service_time: '16:30',\n                    pickup_location: '朝阳区国贸',\n                    total_amount: 2800,\n                    owner_amount: 2660,\n                    status: 1 // 待确认\n                }\n            ];\n        },\n        onChartPeriodChange(e = null) {\n            this.chartPeriod = e.detail.value;\n        },\n        getOrderStatusClass(status = null) {\n            const classMap = new UTSJSONObject({\n                1: 'pending',\n                2: 'confirmed',\n                3: 'ongoing',\n                4: 'completed'\n            });\n            return classMap[status] || '';\n        },\n        getOrderStatusText(status = null) {\n            const textMap = new UTSJSONObject({\n                1: '待确认',\n                2: '已确认',\n                3: '进行中',\n                4: '已完成'\n            });\n            return textMap[status] || '';\n        },\n        goToSettings() {\n            uni.navigateTo({\n                url: '/pages/owner/settings'\n            });\n        },\n        goToCarManage() {\n            uni.navigateTo({\n                url: '/pages/owner/car-manage'\n            });\n        },\n        goToOrderManage() {\n            uni.navigateTo({\n                url: '/pages/owner/order-manage'\n            });\n        },\n        goToIncome() {\n            uni.navigateTo({\n                url: '/pages/owner/income'\n            });\n        },\n        goToWithdraw() {\n            uni.navigateTo({\n                url: '/pages/owner/withdraw'\n            });\n        },\n        goToOrderDetail(order = null) {\n            uni.navigateTo({\n                url: `/pages/order-detail/order-detail?id=${order._id}`\n            });\n        },\n        // 联系客户\n        contactCustomer(order = null) {\n            uni.showActionSheet({\n                itemList: ['拨打电话', '发送短信'],\n                success: (res) => {\n                    if (res.tapIndex === 0) {\n                        // 拨打电话\n                        uni.makePhoneCall({\n                            phoneNumber: '138****8888' // 实际应该从订单数据获取\n                        });\n                    }\n                    else if (res.tapIndex === 1) {\n                        // 发送短信\n                        uni.showToast({\n                            title: '短信功能开发中',\n                            icon: 'none'\n                        });\n                    }\n                }\n            });\n        },\n        // 确认订单\n        confirmOrder(order = null) {\n            uni.showModal(new UTSJSONObject({\n                title: '确认订单',\n                content: `确认接受订单 ${order.order_no} 吗？`,\n                success: (res) => {\n                    if (res.confirm) {\n                        // 这里应该调用API确认订单\n                        order.status = 2; // 更新为已确认状态\n                        uni.showToast({\n                            title: '订单已确认',\n                            icon: 'success'\n                        });\n                    }\n                }\n            }));\n        },\n        // 拒绝订单\n        rejectOrder(order = null) {\n            uni.showModal(new UTSJSONObject({\n                title: '拒绝订单',\n                content: `确认拒绝订单 ${order.order_no} 吗？`,\n                success: (res) => {\n                    if (res.confirm) {\n                        // 这里应该调用API拒绝订单\n                        const index = this.recentOrders.findIndex(item => { return item._id === order._id; });\n                        if (index > -1) {\n                            this.recentOrders.splice(index, 1); // 从列表中移除\n                        }\n                        uni.showToast({\n                            title: '订单已拒绝',\n                            icon: 'success'\n                        });\n                    }\n                }\n            }));\n        },\n    }\n});\n//# sourceMappingURL=/Users/admin/Documents/HBuilderProjects/wedding_car/pages/owner/dashboard.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.getSystemInfoSync","uni.__f__","uni.navigateTo","uni.showActionSheet","uni.makePhoneCall","uni.showToast","uni.showModal"],"map":"{\"version\":3,\"file\":\"dashboard.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"dashboard.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";AACA,+BAAe;IACb,IAAI;QACF,OAAO;YACL,eAAe,EAAE,CAAC;YAClB,WAAW,EAAE,CAAC;YACd,aAAa,EAAE,CAAC;YAChB,SAAS,oBAAE;gBACT,QAAQ,EAAE,KAAK;gBACf,MAAM,EAAE,yCAAyC;gBACjD,KAAK,EAAE,MAAM;gBACb,OAAO,EAAE,WAAW;aACrB,CAAA;YACD,UAAU,oBAAE;gBACV,WAAW,EAAE,IAAI;gBACjB,WAAW,EAAE,KAAK;gBAClB,WAAW,EAAE,GAAG;aACjB,CAAA;YACD,YAAY,EAAE,EAAE;SACjB,CAAA;IACH,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IACD,OAAO,EAAE;QACP,kBAAkB;YAChB,MAAM,UAAU,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;YAC3C,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,eAAe,IAAI,CAAC,CAAC;QACzD,CAAC;QACD,aAAa;YACX,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,mCAAmC,EAAC,QAAQ,CAAC,CAAC;YAC9D,SAAS;YACT,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,2DAA2D,CAAC;QACtF,CAAC;QACD,gBAAgB;YACd,WAAW;YACX,IAAI,CAAC,YAAY,GAAG;gBAClB;oBACE,GAAG,EAAE,UAAU;oBACf,QAAQ,EAAE,gBAAgB;oBAC1B,GAAG,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;oBACnC,aAAa,EAAE,KAAK;oBACpB,YAAY,EAAE,YAAY;oBAC1B,YAAY,EAAE,OAAO;oBACrB,eAAe,EAAE,QAAQ;oBACzB,YAAY,EAAE,IAAI;oBAClB,YAAY,EAAE,IAAI;oBAClB,MAAM,EAAE,CAAC,CAAC,MAAM;iBACjB;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,QAAQ,EAAE,gBAAgB;oBAC1B,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;oBACjC,aAAa,EAAE,KAAK;oBACpB,YAAY,EAAE,YAAY;oBAC1B,YAAY,EAAE,OAAO;oBACrB,eAAe,EAAE,QAAQ;oBACzB,YAAY,EAAE,IAAI;oBAClB,YAAY,EAAE,IAAI;oBAClB,MAAM,EAAE,CAAC,CAAC,MAAM;iBACjB;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,QAAQ,EAAE,gBAAgB;oBAC1B,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;oBACjC,aAAa,EAAE,KAAK;oBACpB,YAAY,EAAE,YAAY;oBAC1B,YAAY,EAAE,OAAO;oBACrB,eAAe,EAAE,OAAO;oBACxB,YAAY,EAAE,IAAI;oBAClB,YAAY,EAAE,IAAI;oBAClB,MAAM,EAAE,CAAC,CAAC,MAAM;iBACjB;aACF,CAAC;QACJ,CAAC;QACD,mBAAmB,CAAC,CAAC,OAAA;YACnB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;QACpC,CAAC;QACD,mBAAmB,CAAC,MAAM,OAAA;YACxB,MAAM,QAAQ,qBAAG;gBACf,CAAC,EAAE,SAAS;gBACZ,CAAC,EAAE,WAAW;gBACd,CAAC,EAAE,SAAS;gBACZ,CAAC,EAAE,WAAW;aACf,CAAA,CAAC;YACF,OAAO,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QAChC,CAAC;QACD,kBAAkB,CAAC,MAAM,OAAA;YACvB,MAAM,OAAO,qBAAG;gBACd,CAAC,EAAE,KAAK;gBACR,CAAC,EAAE,KAAK;gBACR,CAAC,EAAE,KAAK;gBACR,CAAC,EAAE,KAAK;aACT,CAAA,CAAC;YACF,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QAC/B,CAAC;QACD,YAAY;YACV,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,uBAAuB;aAC7B,CAAC,CAAC;QACL,CAAC;QACD,aAAa;YACX,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,yBAAyB;aAC/B,CAAC,CAAC;QACL,CAAC;QACD,eAAe;YACb,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,2BAA2B;aACjC,CAAC,CAAC;QACL,CAAC;QACD,UAAU;YACR,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,qBAAqB;aAC3B,CAAC,CAAC;QACL,CAAC;QACD,YAAY;YACV,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,uBAAuB;aAC7B,CAAC,CAAC;QACL,CAAC;QACD,eAAe,CAAC,KAAK,OAAA;YACnB,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,uCAAuC,KAAK,CAAC,GAAG,EAAE;aACxD,CAAC,CAAC;QACL,CAAC;QACD,OAAO;QACP,eAAe,CAAC,KAAK,OAAA;YACnB,GAAG,CAAC,eAAe,CAAC;gBAClB,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;gBAC1B,OAAO,EAAE,CAAC,GAAG;oBACX,IAAI,GAAG,CAAC,QAAQ,KAAK,CAAC,EAAE;wBACtB,OAAO;wBACP,GAAG,CAAC,aAAa,CAAC;4BAChB,WAAW,EAAE,aAAa,CAAC,cAAc;yBAC1C,CAAC,CAAC;qBACJ;yBAAM,IAAI,GAAG,CAAC,QAAQ,KAAK,CAAC,EAAE;wBAC7B,OAAO;wBACP,GAAG,CAAC,SAAS,CAAC;4BACZ,KAAK,EAAE,SAAS;4BAChB,IAAI,EAAE,MAAM;yBACb,CAAC,CAAC;qBACJ;gBACH,CAAC;aACF,CAAC,CAAC;QACL,CAAC;QACD,OAAO;QACP,YAAY,CAAC,KAAK,OAAA;YAChB,GAAG,CAAC,SAAS,mBAAC;gBACZ,KAAK,EAAE,MAAM;gBACb,OAAO,EAAE,UAAU,KAAK,CAAC,QAAQ,KAAK;gBACtC,OAAO,EAAE,CAAC,GAAG;oBACX,IAAI,GAAG,CAAC,OAAO,EAAE;wBACf,gBAAgB;wBAChB,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,WAAW;wBAC7B,GAAG,CAAC,SAAS,CAAC;4BACZ,KAAK,EAAE,OAAO;4BACd,IAAI,EAAE,SAAS;yBAChB,CAAC,CAAC;qBACJ;gBACH,CAAC;aACF,EAAC,CAAC;QACL,CAAC;QACD,OAAO;QACP,WAAW,CAAC,KAAK,OAAA;YACf,GAAG,CAAC,SAAS,mBAAC;gBACZ,KAAK,EAAE,MAAM;gBACb,OAAO,EAAE,UAAU,KAAK,CAAC,QAAQ,KAAK;gBACtC,OAAO,EAAE,CAAC,GAAG;oBACX,IAAI,GAAG,CAAC,OAAO,EAAE;wBACf,gBAAgB;wBAChB,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,MAAI,OAAA,IAAI,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,EAAtB,CAAsB,CAAC,CAAC;wBAC1E,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;4BACd,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS;yBAC9C;wBACD,GAAG,CAAC,SAAS,CAAC;4BACZ,KAAK,EAAE,OAAO;4BACd,IAAI,EAAE,SAAS;yBAChB,CAAC,CAAC;qBACJ;gBACH,CAAC;aACF,EAAC,CAAC;QACL,CAAC;KACF;CACF,EAAA\"}"}
