{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            carId: '',\n            carDetail: new UTSJSONObject({}),\n            ownerInfo: new UTSJSONObject({}),\n            reviews: []\n        };\n    },\n    onLoad(options) {\n        this.carId = options.id;\n        this.loadCarDetail();\n    },\n    methods: {\n        loadCarDetail() {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    // 这里应该调用云函数获取车辆详情\n                    // const res = await uniCloud.callFunction({\n                    //   name: 'car-detail',\n                    //   data: { car_id: this.carId }\n                    // });\n                    // 使用模拟数据\n                    this.carDetail = new UTSJSONObject({\n                        _id: this.carId,\n                        brand: '劳斯莱斯',\n                        model: '幻影',\n                        color: '珍珠白',\n                        year: '2023',\n                        seats: 4,\n                        images: [\n                            '/static/cars/rolls1.jpg',\n                            '/static/cars/rolls2.jpg',\n                            '/static/cars/rolls3.jpg'\n                        ],\n                        price_per_hour: 2000,\n                        service_area: '北京市朝阳区',\n                        rating: 4.9,\n                        order_count: 156,\n                        features: ['GPS导航', '车载WiFi', '豪华内饰', '专业司机', '婚车装饰', '保险齐全'],\n                        description: '顶级豪华婚车，为您的重要时刻增添尊贵气质',\n                        isFavorite: false\n                    });\n                    this.ownerInfo = new UTSJSONObject({\n                        _id: 'owner001',\n                        nickname: '王师傅',\n                        avatar: '/static/avatar/owner1.jpg',\n                        experience: 8,\n                        total_orders: 256,\n                        good_rate: 99.2\n                    });\n                    this.reviews = [\n                        {\n                            _id: 'review001',\n                            user: {\n                                nickname: '新娘小美',\n                                avatar: '/static/avatar/user1.jpg'\n                            },\n                            rating: 5,\n                            comment: '车子很漂亮，司机师傅很专业，服务态度很好，婚礼当天很顺利！',\n                            images: ['/static/reviews/review1.jpg'],\n                            create_time: '2025-01-15T10:30:00.000Z'\n                        },\n                        {\n                            _id: 'review002',\n                            user: {\n                                nickname: '幸福新郎',\n                                avatar: '/static/avatar/user2.jpg'\n                            },\n                            rating: 5,\n                            comment: '劳斯莱斯就是不一样，非常满意，推荐！',\n                            images: [],\n                            create_time: '2025-01-10T14:20:00.000Z'\n                        }\n                    ];\n                }\n                catch (error) {\n                    uni.__f__('error', 'at pages/car-detail/car-detail.uvue:247', '加载车辆详情失败:', error);\n                    uni.showToast({\n                        title: '加载失败',\n                        icon: 'none'\n                    });\n                }\n            });\n        },\n        toggleFavorite() {\n            this.carDetail.isFavorite = !this.carDetail.isFavorite;\n            uni.showToast({\n                title: this.carDetail.isFavorite ? '已收藏' : '已取消收藏',\n                icon: 'none'\n            });\n        },\n        contactOwner() {\n            uni.showModal(new UTSJSONObject({\n                title: '联系车主',\n                content: '是否拨打车主电话？',\n                success: (res) => {\n                    if (res.confirm) {\n                        uni.makePhoneCall({\n                            phoneNumber: '13800138000'\n                        });\n                    }\n                }\n            }));\n        },\n        goToBooking() {\n            uni.navigateTo({\n                url: `/pages/booking/booking?carId=${this.carId}`\n            });\n        },\n        formatDate(dateStr = null) {\n            const date = new Date(dateStr);\n            const now = new Date();\n            const diff = now.getTime() - date.getTime();\n            const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n            if (days === 0) {\n                return '今天';\n            }\n            else if (days === 1) {\n                return '昨天';\n            }\n            else if (days < 30) {\n                return `${days}天前`;\n            }\n            else {\n                return date.toLocaleDateString();\n            }\n        }\n    }\n});\n//# sourceMappingURL=/Users/admin/Documents/HBuilderProjects/wedding_car/pages/car-detail/car-detail.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.__f__","uni.showToast","uni.showModal","uni.makePhoneCall","uni.navigateTo"],"map":"{\"version\":3,\"file\":\"car-detail.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"car-detail.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
