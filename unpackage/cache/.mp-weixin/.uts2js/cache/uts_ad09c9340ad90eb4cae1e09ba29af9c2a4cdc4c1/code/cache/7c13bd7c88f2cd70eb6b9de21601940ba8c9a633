{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            carImages: [],\n            brandIndex: -1,\n            brands: ['劳斯莱斯', '奔驰', '宝马', '奥迪', '林肯', '凯迪拉克', '雷克萨斯'],\n            seatIndex: -1,\n            seatOptions: ['2座', '4座', '5座', '6座', '7座', '8座'],\n            minHourIndex: -1,\n            minHourOptions: ['2小时', '3小时', '4小时', '6小时', '8小时'],\n            formData: new UTSJSONObject({\n                brand: '',\n                model: '',\n                color: '',\n                year: '',\n                seats: '',\n                price_per_hour: '',\n                service_area: '',\n                description: ''\n            }),\n            availableFeatures: [\n                'GPS导航', '车载WiFi', '真皮座椅', '天窗', '豪华内饰',\n                '专业司机', '婚车装饰', '保险齐全', '24小时服务', '免费接送'\n            ],\n            selectedFeatures: []\n        };\n    },\n    methods: {\n        addImage() {\n            uni.chooseImage(new UTSJSONObject({\n                count: 6 - this.carImages.length,\n                success: (res) => {\n                    this.carImages = [...this.carImages, ...res.tempFilePaths];\n                }\n            }));\n        },\n        removeImage(index = null) {\n            this.carImages.splice(index, 1);\n        },\n        onBrandChange(e = null) {\n            this.brandIndex = e.detail.value;\n            this.formData.brand = this.brands[this.brandIndex];\n        },\n        onYearChange(e = null) {\n            this.formData.year = e.detail.value;\n        },\n        onSeatChange(e = null) {\n            this.seatIndex = e.detail.value;\n            this.formData.seats = parseInt(this.seatOptions[this.seatIndex]);\n        },\n        onMinHourChange(e = null) {\n            this.minHourIndex = e.detail.value;\n        },\n        toggleFeature(feature = null) {\n            const index = this.selectedFeatures.indexOf(feature);\n            if (index > -1) {\n                this.selectedFeatures.splice(index, 1);\n            }\n            else {\n                this.selectedFeatures.push(feature);\n            }\n        },\n        validateForm() {\n            if (this.carImages.length === 0) {\n                uni.showToast({\n                    title: '请至少上传一张车辆图片',\n                    icon: 'none'\n                });\n                return false;\n            }\n            if (!this.formData.brand) {\n                uni.showToast({\n                    title: '请选择车辆品牌',\n                    icon: 'none'\n                });\n                return false;\n            }\n            if (!this.formData.model) {\n                uni.showToast({\n                    title: '请输入车辆型号',\n                    icon: 'none'\n                });\n                return false;\n            }\n            if (!this.formData.price_per_hour) {\n                uni.showToast({\n                    title: '请输入每小时价格',\n                    icon: 'none'\n                });\n                return false;\n            }\n            return true;\n        },\n        submitCar() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.validateForm()) {\n                    return Promise.resolve(null);\n                }\n                uni.showLoading({\n                    title: '提交中...'\n                });\n                try {\n                    // 这里应该调用云函数提交车辆信息\n                    yield new Promise(resolve => { return setTimeout(resolve, 2000); });\n                    uni.hideLoading();\n                    uni.showToast({\n                        title: '提交成功，等待审核',\n                        icon: 'success'\n                    });\n                    setTimeout(() => {\n                        uni.navigateBack();\n                    }, 1500);\n                }\n                catch (error) {\n                    uni.hideLoading();\n                    uni.showToast({\n                        title: '提交失败，请重试',\n                        icon: 'none'\n                    });\n                }\n            });\n        }\n    }\n});\n//# sourceMappingURL=/Users/admin/Documents/HBuilderProjects/wedding_car/pages/owner/car-add.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.chooseImage","uni.showToast","uni.showLoading","uni.hideLoading","uni.navigateBack"],"map":"{\"version\":3,\"file\":\"car-add.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"car-add.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
