{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            orderId: '',\n            paymentAmount: 0,\n            selectedMethod: 'wechat',\n            countdown: 900,\n            countdownTimer: null\n        };\n    },\n    computed: {\n        countdownText() {\n            const minutes = Math.floor(this.countdown / 60);\n            const seconds = this.countdown % 60;\n            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n        }\n    },\n    onLoad(options) {\n        this.orderId = options.orderId;\n        this.paymentAmount = parseFloat(options.amount);\n        this.startCountdown();\n    },\n    onUnload() {\n        if (this.countdownTimer) {\n            clearInterval(this.countdownTimer);\n        }\n    },\n    methods: {\n        startCountdown() {\n            this.countdownTimer = setInterval(() => {\n                this.countdown--;\n                if (this.countdown <= 0) {\n                    clearInterval(this.countdownTimer);\n                    uni.showModal(new UTSJSONObject({\n                        title: '支付超时',\n                        content: '订单已超时，请重新下单',\n                        showCancel: false,\n                        success: () => {\n                            uni.navigateBack();\n                        }\n                    }));\n                }\n            }, 1000);\n        },\n        selectMethod(method = null) {\n            this.selectedMethod = method;\n        },\n        handlePayment() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (this.selectedMethod === 'wechat') {\n                    this.wechatPay();\n                }\n            });\n        },\n        wechatPay() {\n            uni.showLoading({\n                title: '发起支付...'\n            });\n            // 模拟支付流程\n            setTimeout(() => {\n                uni.hideLoading();\n                // 模拟支付成功\n                uni.redirectTo({\n                    url: `/pages/order-success/order-success?orderId=${this.orderId}`\n                });\n            }, 2000);\n        }\n    }\n});\n//# sourceMappingURL=/Users/admin/Documents/HBuilderProjects/wedding_car/pages/payment/payment.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.showModal","uni.navigateBack","uni.showLoading","uni.hideLoading","uni.redirectTo"],"map":"{\"version\":3,\"file\":\"payment.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"payment.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACA,+BAAe;IACb,IAAI;QACF,OAAO;YACL,OAAO,EAAE,EAAE;YACX,aAAa,EAAE,CAAC;YAChB,cAAc,EAAE,QAAQ;YACxB,SAAS,EAAE,GAAG;YACd,cAAc,EAAE,IAAI;SACrB,CAAA;IACH,CAAC;IACD,QAAQ,EAAE;QACR,aAAa;YACX,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC;YAChD,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpC,OAAO,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;QACzF,CAAC;KACF;IACD,MAAM,CAAC,OAAO;QACZ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IACD,QAAQ;QACN,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SACpC;IACH,CAAC;IACD,OAAO,EAAE;QACP,cAAc;YACZ,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC;gBAChC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;oBACvB,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBACnC,GAAG,CAAC,SAAS,mBAAC;wBACZ,KAAK,EAAE,MAAM;wBACb,OAAO,EAAE,aAAa;wBACtB,UAAU,EAAE,KAAK;wBACjB,OAAO,EAAE;4BACP,GAAG,CAAC,YAAY,EAAE,CAAC;wBACrB,CAAC;qBACF,EAAC,CAAC;iBACJ;YACH,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC;QACD,YAAY,CAAC,MAAM,OAAA;YACjB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;QAC/B,CAAC;QACK,aAAa;;gBACjB,IAAI,IAAI,CAAC,cAAc,KAAK,QAAQ,EAAE;oBACpC,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;YACH,CAAC;SAAA;QACD,SAAS;YACP,GAAG,CAAC,WAAW,CAAC;gBACd,KAAK,EAAE,SAAS;aACjB,CAAC,CAAC;YAEH,SAAS;YACT,UAAU,CAAC;gBACT,GAAG,CAAC,WAAW,EAAE,CAAC;gBAElB,SAAS;gBACT,GAAG,CAAC,UAAU,CAAC;oBACb,GAAG,EAAE,8CAA8C,IAAI,CAAC,OAAO,EAAE;iBAClE,CAAC,CAAC;YACL,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC;KACF;CACF,EAAA\"}"}
